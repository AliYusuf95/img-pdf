{"version":3,"sources":["app/components/download-form/service.ts","app/components/download-form/DownloadForm.tsx","app/components/container/ClearCache.tsx","app/components/container/Container.tsx","app/components/footer/Footer.tsx","app/components/header/Header.tsx","app/App.tsx","reportWebVitals.ts","index.tsx","updateFavIcon.ts"],"names":["CACHE_KEY","stringUrl","a","url","URL","trim","allowedPaths","map","s","toLowerCase","includes","host","pathname","Error","bookId","searchParams","get","axios","post","ebookNewName","userId","headers","Authorization","params","response","data","JSON","parse","bookConfig","accessibleBook","getImageURL","id","origin","largePath","getBookImages","callback","firstPage","lastPage","currentProgress","getProgress","progress","Math","floor","imageURLGen","images","i","push","result","window","caches","open","then","cache","addAll","length","promises","index","match","Promise","resolve","reject","arrayBuffer","arr","sort","catch","src","canvas","document","createElement","img","Image","onload","width","naturalWidth","height","naturalHeight","ctx","getContext","drawImage","toBlob","b","remove","crossOrigin","onerror","e","all","res","item","createPDFFromImages","PDFDocument","create","pdfDoc","image","embedJpg","pdfImage","pdfImages","forEach","addPage","x","y","save","downloadFileFromBlob","blob","fileName","fileUrl","createObjectURL","setAttribute","style","visibility","body","appendChild","click","setTimeout","revokeObjectURL","clearCache","delete","DownloadForm","useState","bookUrl","setBookUrl","undefined","error","setError","progressState","setProgressState","setProgress","bookInfo","setBookInfo","firstPageVale","setFirstPageVale","lastPageVale","setLastPageVale","firstPageFormGroup","React","createRef","lastPageFormGroup","bookInfoQuery","useQuery","getBookInfo","enabled","refetchOnWindowFocus","refetchInterval","retry","retryDelay","onSuccess","startPage","totalPageCount","onClickBookInfo","evt","preventDefault","refetch","onPageRanchChanged","setState","value","parseInt","target","Number","isNaN","useEffect","hasError","current","classList","add","onClickDownload","step","prevState","pdf","Blob","type","title","message","className","htmlFor","placeholder","onChange","aria-label","disabled","isLoading","onClick","Spinner","size","sx","verticalAlign","isError","Flash","my","variant","Box","borderWidth","borderStyle","borderColor","borderRadius","bg","mt","p","display","gridTemplateColumns","fontWeight","borderRightWidth","borderRightStyle","borderBottomWidth","borderBottomStyle","alt","borderTopWidth","borderTopStyle","Heading","fontSize","mb","ref","TextInput","icon","TriangleLeftIcon","aria-describedby","defaultValue","min","max","TriangleRightIcon","pt","textAlign","ButtonPrimary","Button","ml","ProgressBar","ClearCache","isOpen","setIsOpen","returnFocusRef","useRef","onClickClearCache","location","reload","ButtonDanger","Dialog","onDismiss","aria-labelledby","Header","Text","fontFamily","justifyContent","mr","Container","Footer","process","App","ThemeProvider","colorMode","dayScheme","nightScheme","BaseStyles","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","queryClient","QueryClient","render","client","getElementById","faviconTags","getElementsByClassName","lastCheck","changeFavIcon","isDark","search","replace","href","matchMedia","matches","addEventListener","updateFavIcon"],"mappings":"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","file":"static/js/main.871f34eb.chunk.js","sourcesContent":["import axios from 'axios';\nimport { PDFDocument } from 'pdf-lib';\nimport type { PDFImage } from 'pdf-lib';\n\nconst CACHE_KEY = 'images';\n\ninterface BookInfoResponse {\n  accessibleBook: boolean;\n  bookConfig: string;\n}\n\nexport interface BookConfig {\n  URL: URL;\n  accessibleBook: boolean;\n  HomeURL: string;\n  RightToLeft: string;\n  appLogoIcon: string;\n  backGroundImgURL: string;\n  largePath: string;\n  normalPath: string;\n  startPage: number;\n  thumbPath: string;\n  title: string;\n  totalPageCount: number;\n}\n\nexport async function getBookInfo(stringUrl: string): Promise<BookConfig> {\n  const url = new URL(stringUrl.trim());\n  const allowedPaths = ['/eBook.html', '/mEBook.html'].map((s) =>\n    s.toLowerCase(),\n  );\n  const allowedHosts = ['www.myeschoolhome.com', 'myeschoolhome.com'].map((s) =>\n    s.toLowerCase(),\n  );\n  if (\n    !allowedHosts.includes(url.host.toLowerCase()) ||\n    !allowedPaths.includes(url.pathname.toLowerCase())\n  ) {\n    throw new Error('Not supported book url');\n  }\n  const bookId = url.searchParams.get('name');\n  if (!bookId) {\n    throw new Error('Missing book name');\n  }\n  const response = await axios.post<BookInfoResponse>(\n    'https://cors.ali-yusuf.com/',\n    { ebookNewName: bookId, userId: null },\n    {\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8',\n        Authorization: 'Bearer null',\n      },\n      params: {\n        url: 'https://www.myeschoolhome.com/library/webservice/ebooks/getEbookConfig',\n      },\n    },\n  );\n  let data: BookConfig;\n  try {\n    data = JSON.parse(response.data.bookConfig);\n  } catch (e: unknown) {\n    throw new Error(\"Can't parse response data.\");\n  }\n  return { ...data, URL: url, accessibleBook: !!response.data?.accessibleBook };\n}\n\nexport function getImageURL(bookConfig: BookConfig) {\n  return (id: number): string =>\n    `https://cors.ali-yusuf.com/?url=${bookConfig.URL.origin}${bookConfig.largePath}${id}.jpg`;\n}\n\nexport async function getBookImages(\n  bookConfig: BookConfig,\n  { firstPage, lastPage }: { firstPage: number; lastPage: number },\n  callback?: (progress: number) => void,\n): Promise<ArrayBuffer[]> {\n  let currentProgress = 0;\n  const processSteps = 2;\n  const getProgress = (progress = 0) => {\n    currentProgress += progress || 1;\n    return Math.floor(currentProgress / processSteps);\n  };\n\n  const imageURLGen = getImageURL(bookConfig);\n  const images: string[] = [];\n  for (let i = firstPage; i <= lastPage; i++) {\n    images.push(imageURLGen(i));\n  }\n\n  const result: Promise<{ data: ArrayBuffer; sort: number }>[] = [];\n  if ('caches' in window) {\n    await caches.open(CACHE_KEY).then(async (cache) => {\n      await cache.addAll(images);\n      callback?.(getProgress(images.length));\n      const promises = images.map((url, index) =>\n        cache.match(url).then((data) => {\n          if (!data) {\n            throw new Error(`Missing image, Url: ${url}`);\n          }\n          callback?.(getProgress());\n          return new Promise<{ data: ArrayBuffer; sort: number }>(\n            (resolve, reject) => {\n              data\n                .arrayBuffer()\n                .then((arr) => {\n                  resolve({ data: arr, sort: index });\n                })\n                .catch(reject);\n            },\n          );\n        }),\n      );\n      result.push(...promises);\n    });\n  } else {\n    const promises = images.map((src, index) => {\n      return new Promise<{ data: ArrayBuffer; sort: number }>(\n        (resolve, reject) => {\n          const canvas = document.createElement('canvas');\n          const img = new Image();\n          img.src = src;\n          img.onload = () => {\n            callback?.(getProgress());\n            canvas.width = img.naturalWidth;\n            canvas.height = img.naturalHeight;\n            const ctx = canvas.getContext('2d');\n            ctx?.drawImage(img, 0, 0);\n            canvas.toBlob((b) => {\n              if (b) {\n                b.arrayBuffer()\n                  .then((arr) => {\n                    callback?.(getProgress());\n                    resolve({ data: arr, sort: index });\n                  })\n                  .catch(reject);\n              } else {\n                reject(new Error(`Empty image blob, Url: ${src}`));\n              }\n              canvas.remove();\n            }, 'image/jpeg');\n          };\n          img.crossOrigin = 'anonymous';\n          img.onerror = (e) => {\n            canvas.remove();\n            reject(e);\n          };\n        },\n      );\n    });\n    result.push(...promises);\n  }\n\n  return Promise.all(result).then((res) =>\n    res.sort((a, b) => (a.sort > b.sort ? 1 : -1)).map((item) => item.data),\n  );\n}\n\nexport async function createPDFFromImages(\n  images: ArrayBuffer[],\n  callback?: (progress: number) => void,\n): Promise<Uint8Array> {\n  let currentProgress = 0;\n  const processSteps = 2;\n  const getProgress = (progress = 0) => {\n    currentProgress += progress || 1;\n    return Math.floor(currentProgress / processSteps);\n  };\n  const pdfDoc = await PDFDocument.create();\n  const promises = images.map((image, index) => {\n    return new Promise<{ data: PDFImage; sort: number }>((resolve, reject) => {\n      pdfDoc\n        .embedJpg(image)\n        .then((pdfImage) => {\n          resolve({ data: pdfImage, sort: index });\n        })\n        .catch(reject);\n    });\n  });\n  const pdfImages = (await Promise.all(promises))\n    .sort((a, b) => (a.sort > b.sort ? 1 : -1))\n    .map((item) => item.data);\n  callback?.(getProgress(pdfImages.length));\n  pdfImages.forEach((image) => {\n    const page = pdfDoc.addPage([image.width, image.height]);\n    page.drawImage(image, {\n      x: 0,\n      y: 0,\n    });\n  });\n  callback?.(getProgress(pdfImages.length));\n  return pdfDoc.save();\n}\n\nexport function downloadFileFromBlob(blob: Blob, fileName: string): void {\n  const fileUrl = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.setAttribute('href', fileUrl);\n  a.setAttribute('download', fileName);\n  a.style.visibility = 'hidden';\n  document.body.appendChild(a);\n  a.click();\n  a.remove();\n  setTimeout(() => {\n    URL.revokeObjectURL(fileUrl);\n  }, 0);\n}\n\nexport async function clearCache(): Promise<void> {\n  if ('caches' in window) {\n    await caches.delete(CACHE_KEY);\n  }\n}\n","import React, { Dispatch, SetStateAction, useEffect, useState } from 'react';\nimport type { MouseEvent, ChangeEvent } from 'react';\nimport {\n  DesktopDownloadIcon,\n  SearchIcon,\n  TriangleLeftIcon,\n  TriangleRightIcon,\n} from '@primer/octicons-react';\nimport {\n  Box,\n  ProgressBar,\n  Spinner,\n  ButtonPrimary,\n  Flash,\n  Button,\n  TextInput,\n  Heading,\n} from '@primer/components';\nimport { useQuery } from 'react-query';\nimport {\n  BookConfig,\n  createPDFFromImages,\n  downloadFileFromBlob,\n  getBookImages,\n  getBookInfo,\n  getImageURL,\n} from './service';\nimport './DownloadForm.scss';\n\nfunction DownloadForm(): JSX.Element {\n  const [bookUrl, setBookUrl] = useState('');\n  const [error, setError] = useState(undefined as string | undefined);\n  const [progressState, setProgressState] = useState('init');\n  const [progress, setProgress] = useState(0);\n  const [bookInfo, setBookInfo] = useState(undefined as BookConfig | undefined);\n  const [firstPageVale, setFirstPageVale] = useState(1);\n  const [lastPageVale, setLastPageVale] = useState(1);\n  const firstPageFormGroup = React.createRef<HTMLInputElement>();\n  const lastPageFormGroup = React.createRef<HTMLInputElement>();\n  const bookInfoQuery = useQuery<BookConfig, Error>(\n    ['book', 'info', bookUrl],\n    () => getBookInfo(bookUrl),\n    {\n      enabled: false,\n      refetchOnWindowFocus: false,\n      refetchInterval: false,\n      retry: 1,\n      retryDelay: 0,\n      onSuccess: (bookConfig) => {\n        setBookInfo(bookConfig);\n        setFirstPageVale(bookConfig?.startPage || 1);\n        setLastPageVale(bookConfig?.totalPageCount || 1);\n        if (!bookConfig.accessibleBook) {\n          setError('Invalid book url');\n        }\n      },\n    },\n  );\n  const onClickBookInfo = async (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    setProgress(0);\n    setError(undefined);\n    setBookInfo(undefined);\n    setProgressState('init');\n    setFirstPageVale(1);\n    setLastPageVale(1);\n    await bookInfoQuery.refetch();\n  };\n\n  const onPageRanchChanged = (setState: Dispatch<SetStateAction<number>>) => {\n    return (evt: ChangeEvent<HTMLInputElement>) => {\n      const value = parseInt(evt.target.value, 10);\n      setState(Number.isNaN(value) ? -1 : value);\n    };\n  };\n\n  // useEffect(() => {\n  //   if (!bookInfo) {\n  //     return;\n  //   }\n  //   console.log(bookInfo.accessibleBook);\n  //   if (bookInfo.accessibleBook) {\n  //     setFirstPageVale(bookInfo.startPage);\n  //     setLastPageVale(bookInfo.totalPageCount);\n  //   } else {\n  //     setError('Invalid book url');\n  //   }\n  // }, [bookInfo]);\n\n  useEffect(() => {\n    if (!bookInfo || !bookInfo.accessibleBook) {\n      return;\n    }\n    let hasError = false;\n    if (firstPageVale <= 0 || firstPageVale > bookInfo.totalPageCount) {\n      firstPageFormGroup.current?.classList.add('errored');\n      hasError = true;\n    } else {\n      firstPageFormGroup.current?.classList.remove('errored');\n    }\n    if (\n      lastPageVale < firstPageVale ||\n      lastPageVale > bookInfo.totalPageCount\n    ) {\n      lastPageFormGroup.current?.classList.add('errored');\n      hasError = true;\n    } else {\n      lastPageFormGroup.current?.classList.remove('errored');\n    }\n    if (hasError) {\n      setError('Wrong pages rage inputs');\n    } else {\n      setError(undefined);\n    }\n  }, [\n    bookInfo,\n    firstPageFormGroup,\n    firstPageVale,\n    lastPageFormGroup,\n    lastPageVale,\n  ]);\n\n  const onClickDownload = async (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    if (!bookInfo || !bookInfo.accessibleBook) {\n      return;\n    }\n    if (firstPageVale <= 0 || firstPageVale > bookInfo.totalPageCount) {\n      return;\n    }\n    if (\n      lastPageVale < firstPageVale ||\n      lastPageVale > bookInfo.totalPageCount\n    ) {\n      return;\n    }\n    setError(undefined);\n    setProgress(0);\n    setProgressState('loading');\n    try {\n      const images = await getBookImages(\n        bookInfo,\n        { firstPage: firstPageVale, lastPage: lastPageVale },\n        (step) => {\n          setProgress(step * 0.8);\n        },\n      );\n      const pdf = await createPDFFromImages(images, (step) => {\n        const current = step * 0.2;\n        setProgress((prevState) => prevState + current);\n      });\n      const blob = new Blob([pdf], {\n        type: 'application/pdf',\n      });\n      downloadFileFromBlob(blob, bookInfo.title);\n      setProgressState('finish');\n    } catch (e: unknown) {\n      if (typeof e === 'string') {\n        setError(e);\n      } else if (e instanceof Error) {\n        setError(e.message);\n      } else {\n        setError(e as string);\n      }\n    }\n  };\n\n  const onClickResetForm = (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    setBookUrl('');\n    setProgressState('init');\n    setProgress(0);\n    setBookInfo(undefined);\n    setError(undefined);\n  };\n  return (\n    <article className=\"Box-row\">\n      <label htmlFor=\"repository_description\">Book link</label>\n      <div className=\"input-group\">\n        <input\n          className=\"form-control\"\n          type=\"url\"\n          placeholder=\"https://www.myeschoolhome.com/mEBook.html?name=xxxxxx\"\n          value={bookUrl}\n          onChange={(e) => setBookUrl(e.target.value)}\n          aria-label=\"link\"\n        />\n        <span className=\"input-group-button\">\n          <button\n            className=\"btn btn-primary\"\n            type=\"button\"\n            aria-label=\"Copy to clipboard\"\n            disabled={bookInfoQuery.isLoading}\n            onClick={onClickBookInfo}\n          >\n            {!bookInfoQuery.isLoading ? (\n              <>\n                <SearchIcon /> <span className=\"text-light\"> Check</span>\n              </>\n            ) : (\n              <>\n                <Spinner size=\"small\" sx={{ verticalAlign: 'text-bottom' }} />{' '}\n                <span className=\"text-light\">\n                  Checking\n                  <span className=\"AnimatedEllipsis\" />\n                </span>\n              </>\n            )}\n          </button>\n        </span>\n      </div>\n      {(bookInfoQuery.isError || error) && (\n        <Flash my={3} variant=\"danger\">\n          {error || bookInfoQuery.error?.message}\n        </Flash>\n      )}\n      {bookInfo && bookInfo.accessibleBook && (\n        <Box\n          borderWidth=\"1px\"\n          borderStyle=\"solid\"\n          borderColor=\"border.default\"\n          borderRadius={2}\n          bg=\"canvas.subtle\"\n          mt={3}\n          p={3}\n        >\n          <Box display=\"grid\" gridTemplateColumns=\"1fr 1fr\">\n            <Box\n              fontWeight=\"bold\"\n              borderColor=\"border.default\"\n              borderRightWidth={1}\n              borderRightStyle=\"solid\"\n              borderBottomWidth={1}\n              borderBottomStyle=\"solid\"\n              p={2}\n            >\n              Title\n            </Box>\n            <Box\n              borderColor=\"border.default\"\n              borderBottomWidth={1}\n              borderBottomStyle=\"solid\"\n              p={2}\n            >\n              {bookInfo?.title}\n            </Box>\n            <Box\n              fontWeight=\"bold\"\n              borderColor=\"border.default\"\n              borderRightWidth={1}\n              borderRightStyle=\"solid\"\n              borderBottomWidth={1}\n              borderBottomStyle=\"solid\"\n              p={2}\n            >\n              Cover page\n            </Box>\n            <Box\n              borderColor=\"border.default\"\n              borderBottomWidth={1}\n              borderBottomStyle=\"solid\"\n              p={2}\n            >\n              <img\n                alt=\"cover page\"\n                width=\"200\"\n                src={getImageURL(bookInfo)(1)}\n              />\n            </Box>\n            <Box\n              fontWeight=\"bold\"\n              borderColor=\"border.default\"\n              borderRightWidth={1}\n              borderRightStyle=\"solid\"\n              p={2}\n            >\n              Pages\n            </Box>\n            <Box p={2}>{bookInfo?.totalPageCount}</Box>\n          </Box>\n          <Box\n            borderColor=\"border.default\"\n            borderTopWidth={1}\n            borderTopStyle=\"solid\"\n            p={2}\n          >\n            <Heading fontSize={2} mb={2}>\n              Range\n            </Heading>\n            <div className=\"form-group\" ref={firstPageFormGroup}>\n              <div className=\"form-group-header\">\n                <label htmlFor=\"start-page\">Start page</label>\n              </div>\n              <div className=\"form-group-body\">\n                <TextInput\n                  className=\"form-control\"\n                  type=\"number\"\n                  id=\"start-page\"\n                  icon={TriangleLeftIcon}\n                  placeholder={bookInfo.totalPageCount}\n                  aria-label=\"First page\"\n                  aria-describedby=\"start-page-input-validation\"\n                  defaultValue={firstPageVale}\n                  onChange={onPageRanchChanged(setFirstPageVale)}\n                  min={1}\n                  max={bookInfo.totalPageCount}\n                />\n              </div>\n              <p className=\"note error\" id=\"start-page-input-validation\">\n                Start page must be between 1 and {bookInfo.totalPageCount}\n              </p>\n            </div>\n            <div className=\"form-group\" ref={lastPageFormGroup}>\n              <div className=\"form-group-header\">\n                <label htmlFor=\"last-page\">Last page</label>\n              </div>\n              <div className=\"form-group-body\">\n                <TextInput\n                  className=\"form-control\"\n                  type=\"number\"\n                  id=\"last-page\"\n                  icon={TriangleRightIcon}\n                  placeholder=\"1\"\n                  aria-label=\"First page\"\n                  aria-describedby=\"last-page-input-validation\"\n                  defaultValue={lastPageVale}\n                  onChange={onPageRanchChanged(setLastPageVale)}\n                />\n              </div>\n              <p className=\"note error\" id=\"last-page-input-validation\">\n                Last page must be between {firstPageVale} and{' '}\n                {bookInfo.totalPageCount}\n              </p>\n            </div>\n          </Box>\n          <Box pt={3} textAlign=\"center\">\n            <ButtonPrimary disabled={!!error} onClick={onClickDownload}>\n              {progressState !== 'loading' ? (\n                <>\n                  <DesktopDownloadIcon /> Download\n                </>\n              ) : (\n                <>\n                  <Spinner size=\"small\" sx={{ verticalAlign: 'text-bottom' }} />{' '}\n                  <span className=\"text-light\">\n                    Generating pdf file\n                    <span className=\"AnimatedEllipsis\" />\n                  </span>\n                </>\n              )}\n            </ButtonPrimary>\n            <Button onClick={onClickResetForm} ml={3}>\n              Reset\n            </Button>\n          </Box>\n          {progressState !== 'init' && (\n            <Box pt={3}>\n              <ProgressBar\n                className=\"progress anim-grow-x\"\n                progress={progress}\n              />\n            </Box>\n          )}\n        </Box>\n      )}\n    </article>\n  );\n}\n\nexport default DownloadForm;\n","import React, { MouseEvent, useState } from 'react';\nimport { Box, Button, ButtonDanger, Dialog, Text } from '@primer/components';\nimport { TrashIcon, ZapIcon } from '@primer/octicons-react';\nimport { clearCache } from '../download-form/service';\n\nexport function ClearCache(): JSX.Element {\n  const [isOpen, setIsOpen] = useState(false);\n  const returnFocusRef = React.useRef(null);\n\n  const onClickClearCache = async (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    await clearCache();\n    window.location.reload();\n    setIsOpen(false);\n  };\n\n  return (\n    <>\n      <ButtonDanger ref={returnFocusRef} onClick={() => setIsOpen(true)}>\n        <TrashIcon /> Clear Cache\n      </ButtonDanger>\n      <Dialog\n        isOpen={isOpen}\n        returnFocusRef={returnFocusRef}\n        onDismiss={() => setIsOpen(false)}\n        aria-labelledby=\"label\"\n      >\n        <Dialog.Header>\n          <ZapIcon /> Attention\n        </Dialog.Header>\n        <Box p={3}>\n          <Text id=\"label\" fontFamily=\"sans-serif\">\n            Are you sure you&apos;d like to delete cached images?\n          </Text>\n          <Box display=\"flex\" mt={3} justifyContent=\"flex-end\">\n            <Button onClick={() => setIsOpen(false)} sx={{ mr: 1 }}>\n              Cancel\n            </Button>\n            <ButtonDanger onClick={onClickClearCache}>Delete</ButtonDanger>\n          </Box>\n        </Box>\n      </Dialog>\n    </>\n  );\n}\n","import React from 'react';\nimport { Box } from '@primer/components';\nimport DownloadForm from '../download-form/DownloadForm';\nimport { ClearCache } from './ClearCache';\n\nfunction Container(): JSX.Element {\n  return (\n    <div className=\"position-relative container-lg p-responsive pt-6\">\n      <Box>\n        <DownloadForm />\n      </Box>\n      <Box mt={5}>\n        <ClearCache />\n      </Box>\n    </div>\n  );\n}\n\nexport default Container;\n","import React from 'react';\n\nfunction Footer(): JSX.Element {\n  return (\n    <div className=\"footer container-lg width-full p-responsive\">\n      <div className=\"d-flex flex-justify-center pb-6\">\n        <span className=\"f6 color-fg-muted\" />\n      </div>\n    </div>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\n\nfunction Header(): JSX.Element {\n  return (\n    <div className=\"color-bg-subtle border-bottom\">\n      <div className=\"container-lg p-responsive text-center py-6\">\n        <h1 className=\"h1\">Download Book</h1>\n        <p className=\"f4 color-fg-muted col-md-6 mx-auto\">\n          Version v{process.env.REACT_APP_VERSION}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default Header;\n","import { BaseStyles, ThemeProvider } from '@primer/components';\nimport React from 'react';\nimport { Header, Container, Footer } from './components';\n\nfunction App(): JSX.Element {\n  return (\n    <ThemeProvider colorMode=\"auto\" dayScheme=\"light\" nightScheme=\"dark_dimmed\">\n      <BaseStyles>\n        <div className=\"application-main\">\n          <Header />\n          <Container />\n          <Footer />\n        </div>\n      </BaseStyles>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n  if (onPerfEntry && typeof onPerfEntry === 'function') {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { StrictMode } from 'react';\nimport { render } from 'react-dom';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.scss';\nimport App from './app/App';\nimport reportWebVitals from './reportWebVitals';\nimport updateFavIcon from './updateFavIcon';\n\nconst queryClient = new QueryClient();\nrender(\n  <StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </QueryClientProvider>\n  </StrictMode>,\n  document.getElementById('root'),\n);\n\nupdateFavIcon();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export default function updateFavIcon(): void {\n  const faviconTags = document.getElementsByClassName(\n    'js-site-favicon',\n  ) as HTMLCollectionOf<HTMLLinkElement>;\n  let lastCheck = false;\n\n  function changeFavIcon(isDark: boolean) {\n    if (lastCheck === isDark) {\n      return;\n    }\n    lastCheck = isDark;\n    const search = lastCheck ? 'favicon.' : 'favicon-dark.';\n    const replace = lastCheck ? 'favicon-dark.' : 'favicon.';\n    for (let i = 0; i < faviconTags.length; i++) {\n      faviconTags[i].href = faviconTags[i].href.replace(search, replace);\n    }\n  }\n\n  // first run\n  changeFavIcon(window.matchMedia('(prefers-color-scheme: dark)').matches);\n\n  // listen to events\n  window\n    .matchMedia('(prefers-color-scheme: dark)')\n    .addEventListener('change', (e) => changeFavIcon(e.matches));\n}\n"],"sourceRoot":""}